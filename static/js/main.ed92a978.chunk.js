(this["webpackJsonpmonlock-online-web"]=this["webpackJsonpmonlock-online-web"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){},143:function(e,t){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),i=n.n(c),s=(n(134),n(135),n(91)),o=n.n(s),l=n(100),u=n(11),j=n(227),d=n(223),b=n(222),f=n(226),h=n(228),O=n(230),x=n(231),p=n(232),m=n(220),v=n(33),g=n(53),y=n.n(g),w=n(52),S=n.n(w),k=n(1);var C=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(v.a)();return Object(k.jsx)(j.a,{display:"flex",justifyContent:"center",children:Object(k.jsx)(j.a,{display:"flex",flexDirection:"column",children:Object(k.jsxs)(j.a,{pt:50,children:[Object(k.jsx)(h.a,{variant:"h5",color:d.palette.text.primary,align:"center",mb:3,children:"Monlock"}),Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onAuth(r)},children:[Object(k.jsx)(m.a,{margin:"normal",fullWidth:!0,name:"password",label:"\u041d\u0443\u0443\u0446 \u04af\u0433",type:o?"text":"password",id:"password",variant:"filled",onChange:function(e){return c(e.target.value)},InputProps:{endAdornment:Object(k.jsx)(O.a,{position:"end",children:Object(k.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){return l(!o)},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:o?Object(k.jsx)(S.a,{}):Object(k.jsx)(y.a,{})})})}}),Object(k.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u0422\u0430\u0439\u043b"})]})]})})})};var F=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(v.a)();return Object(k.jsx)(j.a,{display:"flex",justifyContent:"center",children:Object(k.jsx)(j.a,{display:"flex",flexDirection:"column",children:Object(k.jsxs)(j.a,{pt:50,children:[Object(k.jsx)(h.a,{variant:"h5",color:d.palette.text.primary,align:"center",mb:3,children:"Monlock"}),Object(k.jsx)(j.a,{display:"flex",justifyContent:"center",children:Object(k.jsx)(h.a,{variant:"h7",color:d.palette.text.secondary,align:"center",children:"\u041d\u0443\u0443\u0446 \u0444\u0430\u0439\u043b new_encrypted_file.mag"})}),Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onAuth(r)},children:[Object(k.jsx)(m.a,{margin:"normal",fullWidth:!0,name:"password",label:"\u041d\u0443\u0443\u0446 \u04af\u0433",type:o?"text":"password",id:"password",variant:"filled",onChange:function(e){return c(e.target.value)},InputProps:{endAdornment:Object(k.jsx)(O.a,{position:"end",children:Object(k.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){return l(!o)},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:o?Object(k.jsx)(S.a,{}):Object(k.jsx)(y.a,{})})})}}),Object(k.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445"})]})]})})})},D=n(36),A=n.n(D);function I(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}var L=n(224),T=n(67),E=n(106),N=n(219),B=n(30),M=n.n(B);var P=function(e){var t=e.onFocusChange,n=e.secrets,r=e.onSelect,c=Object(a.useRef)(null);return Object(a.useEffect)((function(){c&&c.current.focus()}),[c]),Object(k.jsx)(N.a,{freeSolo:!0,id:"free-solo-2-demo",getOptionLabel:function(e){return"".concat(e.name)},options:n,onChange:function(e,t){r(t.id)},filterOptions:function(e,t){return function(e,t){return e.filter((function(e){if(e.name.toLowerCase().includes(t))return!0;if(e.username&&e.username.toLowerCase().includes(t))return!0;if(e.url&&e.url.toLowerCase().includes(t))return!0;if(M.a.isArray(e.additFields)){var n,a=Object(E.a)(e.additFields);try{for(a.s();!(n=a.n()).done;)if(n.value.fieldName.toLowerCase().includes(t))return!0}catch(r){a.e(r)}finally{a.f()}}return!1}))}(e,t.inputValue)},renderOption:function(e,t){return Object(k.jsx)(j.a,Object(T.a)(Object(T.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:Object(k.jsxs)(j.a,{display:"flex",flexDirection:"column",children:[Object(k.jsx)(j.a,{children:Object(k.jsx)(h.a,{variant:"subtitle2",children:t.name})}),Object(k.jsx)(j.a,{children:Object(k.jsx)(h.a,{variant:"caption",children:t.username})})]})}))},renderInput:function(e){return Object(k.jsx)(m.a,Object(T.a)(Object(T.a)({onFocus:function(){return t(!0)},onBlur:function(){return t(!1)}},e),{},{label:"\u0425\u0430\u0439\u0445 \u0442\u0430\u043b\u0431\u0430\u0440",inputRef:c}))}})},z=n(233),W=n(234),J=n(235);var K=function(e){var t=e.title,n=e.subTitle,a=e.id,r=e.onClick;return Object(k.jsx)(j.a,{mt:1,children:Object(k.jsx)(z.a,{children:Object(k.jsx)(W.a,{onClick:function(){return r(a)},children:Object(k.jsxs)(J.a,{children:[Object(k.jsx)(h.a,{gutterBottom:!0,variant:"h7",component:"div",children:t}),Object(k.jsx)(h.a,{variant:"p",color:"text.secondary",children:n})]})})})})};var R=function(e){var t=e.secrets,n=e.onItemSelect;return Object(k.jsx)(k.Fragment,{children:t.map((function(e){return Object(k.jsx)(K,{title:e.name,subTitle:e.username,id:e.id,onClick:n},e.id)}))})},U=n(108),V=n.n(U),_=n(236),H=n(107);var q=function(e){var t=e.fieldName,n=e.val,r=e.hidden,c=e.link,i=Object(a.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(v.a)(),b=!0===r,f=!0===c;return Object(k.jsxs)(j.a,{mt:5,display:"flex",style:{width:"100%",display:"grid",gridTemplateColumns:"auto 1fr",gridGap:10},children:[Object(k.jsxs)(j.a,{children:[Object(k.jsx)(j.a,{children:Object(k.jsx)(h.a,{variant:"subtitle1",color:d.palette.text.primary,style:{wordBreak:"break-word"},children:t})}),Object(k.jsx)(j.a,{children:f?Object(k.jsx)(_.a,{href:n,target:"_blank",children:n}):Object(k.jsx)(h.a,{variant:"h7",color:d.palette.text.secondary,style:{wordBreak:"break-word"},children:b?o?n:"*********":n})})]}),Object(k.jsxs)(j.a,{display:"flex",pt:2,children:[b?Object(k.jsx)(j.a,{children:Object(k.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){return l(!o)},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:o?Object(k.jsx)(S.a,{}):Object(k.jsx)(y.a,{})})}):null,Object(k.jsx)(j.a,{ml:4,pr:2,children:Object(k.jsx)(H.CopyToClipboard,{text:n,children:Object(k.jsx)(x.a,{edge:"end",children:Object(k.jsx)(V.a,{})})})})]})]})};var G=function(e){var t=e.secret,n=!!t.password&&M.a.isString(t.password),a=!!t.url&&M.a.isString(t.url),r=!!t.username&&M.a.isString(t.username),c=Object(v.a)(),i=M.a.get(t,"additFields",[]);return M.a.isArray(i)||(i=[]),Object(k.jsxs)(j.a,{mt:6,children:[Object(k.jsx)(h.a,{variant:"h6",color:c.palette.text.primary,children:t.name}),a?Object(k.jsx)(q,{fieldName:"URL",val:t.url,link:!0}):null,r?Object(k.jsx)(q,{fieldName:"Username",val:t.username}):null,n?Object(k.jsx)(q,{fieldName:"Password",val:t.password,hidden:!0}):null,i.map((function(e,t,n){return Object(k.jsx)(q,{fieldName:e.fieldName,val:e.value,hidden:!0},t)}))]})},Y=n(110),Q=n.n(Y),X=n(109),Z=n.n(X);var $=function(e){var t=Object(a.useState)("list"),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(v.a)(),b=M.a.get(e,"mainData.data.secrets",[]),h=function(t){e.setSearchFocus(!1),c("detail");var n=b.find((function(e){return e.id===t}));n&&l(n)};return Object(k.jsxs)(j.a,{pt:6,children:[Object(k.jsxs)(j.a,{pb:3,children:[Object(k.jsxs)(j.a,{display:"flex",children:["detail"===r?Object(k.jsx)(j.a,{mr:2,children:Object(k.jsx)(x.a,{onClick:function(){return c("list")},children:Object(k.jsx)(Z.a,{})})}):null,Object(k.jsx)(p.a,{onClick:function(t){return e.setSearchFocus(!0)},fullWidth:!0,variant:"outlined",children:"\u0425\u0430\u0439\u0445"}),Object(k.jsx)(j.a,{ml:2,children:Object(k.jsx)(x.a,{onClick:function(){return e.onLogout()},onMouseDown:function(e){return e.preventDefault()},children:Object(k.jsx)(Q.a,{})})})]}),e.searchFocus?Object(k.jsx)(L.a,{sx:{zIndex:function(e){return e.zIndex.drawer+1}},style:{background:"rgb(0 0 0 / 52%)",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",alignItems:"flex-start",paddingTop:d.spacing(8)},open:e.searchFocus,children:Object(k.jsx)(f.a,{children:Object(k.jsx)(j.a,{px:7,children:Object(k.jsx)(P,{onFocusChange:function(t){return e.setSearchFocus(t)},secrets:b,onSelect:h})})})}):null]}),Object(k.jsxs)(j.a,{style:{height:"calc(100vh - 87px)",overflowY:"auto"},children:["list"===r?Object(k.jsx)(R,{secrets:b,onItemSelect:h}):null,"detail"===r?Object(k.jsx)(G,{secret:o}):null]})]})},ee=n(237);var te=function(){return Object(k.jsx)(L.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:!0,children:Object(k.jsx)(ee.a,{})})};var ne=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),i=Object(u.a)(c,2),s=i[0],h=i[1],O=Object(a.useState)(!1),x=Object(u.a)(O,2),p=x[0],m=x[1],g=Object(a.useState)(""),y=Object(u.a)(g,2),w=y[0],S=y[1],D=Object(a.useState)(!1),L=Object(u.a)(D,2),T=L[0],E=L[1],N=Object(a.useState)(null),B=Object(u.a)(N,2),M=B[0],P=B[1],z=Object(v.a)();function W(e){3===s&&e.ctrlKey&&"KeyF"===e.code&&e.shiftKey&&(e.preventDefault(),r(!0))}Object(a.useEffect)((function(){document.addEventListener("keydown",W,!1)}),[]);var J=function(e){var t=A.a.SHA256(e);return A.a.enc.Base64.stringify(t)},K=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={hash:t},n&&(a.hash2=n,a.step2=!0),e.next=4,fetch("".concat("https://2cqhopp1d8.execute-api.ap-southeast-1.amazonaws.com/Prod","/monlock_action"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(k.jsx)(j.a,{bgcolor:z.palette.background.default,children:Object(k.jsxs)(f.a,{component:"main",children:[Object(k.jsxs)(j.a,{style:{height:"100vh"},children:[1===s?Object(k.jsx)(C,{onAuth:function(e){var t=J(e),n=A.a.AES.encrypt("".concat(t,"\u2191").concat(I(5),"\u2191").concat((new Date).getTime()),"9wdff0j203j4nf02234f23f").toString();S(n),E(!0),K(n).then((function(e){e.isValid?h(s+1):m(!0),E(!1)})).catch((function(e){m(!0),E(!1)}))}}):null,2===s?Object(k.jsx)(F,{onAuth:function(e){var t=J(e),n=A.a.AES.encrypt("".concat(t,"\u2191").concat(I(5),"\u2191").concat((new Date).getTime()),"9wdff0j203j4nf02234f23f");E(!0),K(w,n.toString()).then((function(e){if(e.isValid){h(s+1);var n=A.a.enc.Base64.parse(t).toString(A.a.enc.Hex).substr(0,20),a=null,r=A.a.AES.decrypt(e.data,n);try{a=JSON.parse(r.toString(A.a.enc.Utf8))}catch(i){}var c=function(e){var t={secrets:[],folders:[]};try{e[3].forEach((function(e){var n={id:e[0],name:e[1],url:0===e[2]?void 0:e[2],username:0===e[3]?void 0:e[3],password:0===e[4]?void 0:e[4],additFields:[],folderID:e[6]};0!==e[5]&&e[5].forEach((function(e){n.additFields.push({fieldName:e[0],value:e[1]})})),t.secrets.push(n)})),e[4].forEach((function(e){t.folders.push({id:e[0],name:e[1],secrets:[]})}))}catch(i){return{data:t}}return{data:t,stamp:e[0]}}(a);P(c)}else m(!0);E(!1)})).catch((function(e){m(!0),E(!1)}))}}):null,3===s?Object(k.jsx)($,{mainData:M,onLogout:function(){h(1),S(""),P(null)},searchFocus:n,setSearchFocus:r}):null]}),T?Object(k.jsx)(te,{}):null,Object(k.jsx)(d.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:p,onClose:function(){return m(!1)},children:Object(k.jsx)(b.a,{onClose:function(){return m(!1)},severity:"warning",sx:{width:"100%"},children:"\u0410\u043b\u0434\u0430\u0430 \u0433\u0430\u0440\u043b\u0430\u0430!"})})]})})},ae=n(111),re=n(225);var ce=function(){var e=Object(ae.a)({spacing:4,palette:{mode:"dark"}});return Object(k.jsx)(re.a,{theme:e,children:Object(k.jsx)(ne,{})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,238)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[172,1,2]]]);
//# sourceMappingURL=main.ed92a978.chunk.js.map